!function(e,t,i,o){function n(t,i){this.form=t,this.options=e.extend({},a,i),this._name=r,this.init()}var r="wdForm",a={hideAnimation:"slideUp",hideSpeed:1e3,messageAnimation:"slideDown",messageSpeed:1e3,messagePosition:"before",textContainer:"span",loaderContainer:".loading"};n.prototype={init:function(){var t=this;e(t.form).find("button").each(function(t,i){e(this).click(function(){e(this).addClass("clicked")})}),e(t.form).submit(function(){return t.submitForm(t),!1})},submitForm:function(i){var o=e(i.form).attr("action"),n=e(i.form).serialize();i.showLoader(i),e.ajax({type:"POST",url:o,data:n,success:function(o){i.hideLoader(i),e(i.form).removeClass("error"),o.error&&e(i.form).addClass("error"),o.reset&&i.resetForm(i),o.redirect&&(o.redirect.delay||(o.redirect.delay=0),setTimeout(function(){t.location.href=o.redirect.url},o.redirect.delay)),o.hide&&i.hideForm(i),o.message&&i.showMessage(o.message,i),o.alert&&i.showAlert(o.alert,i),o.callback&&i.doCallback(o.callback,i)},error:function(){i.hideLoader(i)}})},showLoader:function(t){e(t.form).find("button").attr("disabled","disabled");var i=e(t.form).find("button.clicked");i.size()&&(i.find(t.options.textContainer).animate({opacity:0},200),i.find(t.options.loaderContainer).show().animate({opacity:1},200)),e(t.form).addClass("loading").find(":submit").attr("disabled","disabled")},hideLoader:function(t){e(t.form).find("button").removeAttr("disabled");var i=e(t.form).find("button.clicked");i.size()&&(i.removeClass("clicked"),i.find(t.options.textContainer).animate({opacity:1},200),i.find(t.options.loaderContainer).show().animate({opacity:0},200)),e(t.form).removeClass("loading").find(":submit").removeAttr("disabled")},resetForm:function(t){e(t.form)[0].reset()},hideForm:function(t){"slideUp"==t.options.hideAnimation?e(t.form).slideUp(t.options.hideSpeed):e(t.form).hide()},showMessage:function(t,o){var n=i.createElement("div");"before"==o.options.messagePosition?e(o.form).before(n):e(o.form).after(n),"slideDown"==o.options.messageAnimation&&e(n).hide().html(t).slideDown(o.options.messageSpeed)},showAlert:function(t,i){if("function"==typeof e.wdAlert){var o=e.extend({},i.options.alert,t);e.wdAlert(o)}else{var n="";t.title&&(n+=t.title),t.message&&(t.title&&(n+="\n"),n+=t.message),n.length&&alert(n)}},doCallback:function(i,o){var n=e.Callbacks();n.add(t[i.function]),i.attr?n.fire(i.attr):n.fire()},_resetForm:function(e){e.resetForm(e)}},e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new n(this,t))})}}(jQuery,window,document);